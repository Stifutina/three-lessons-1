import{D as ye,H as A,F as V,e as k,f as xe,g as te,C as W,S as be,E as Ge,P as Se,W as fe,T as Be,N as ae,d as oe,a as Le,h as Te,i as Fe,j as Ie,k as Ae,l as ke,m as De,n as ve,o as He,p as re,M as P,q as Pe,r as Ce,B as Ne,s as je,t as Ue,u as Ve,v as ze}from"./three.module-BiaCWeGM.js";/* empty css              */import{O as We}from"./OrbitControls-C9HoQeHB.js";import{G as Oe}from"./lil-gui.esm-hsJpI9MV.js";class Ye extends ye{constructor(p){super(p),this.type=A}parse(p){const c=function(e,a){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(a||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(a||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(a||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(a||""))}},we=`
`,J=function(e,a,r){a=a||1024;let i=e.pos,s=-1,t=0,l="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(s=o.indexOf(we))&&t<a&&i<e.byteLength;)l+=o,t+=o.length,i+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<s?(e.pos+=t+s+1,l+o.slice(0,s)):!1},_e=function(e){const a=/^#\?(\S+)/,r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,t={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,o;for((e.pos>=e.byteLength||!(l=J(e)))&&c(1,"no header found"),(o=l.match(a))||c(3,"bad initial token"),t.valid|=1,t.programtype=o[1],t.string+=l+`
`;l=J(e),l!==!1;){if(t.string+=l+`
`,l.charAt(0)==="#"){t.comments+=l+`
`;continue}if((o=l.match(r))&&(t.gamma=parseFloat(o[1])),(o=l.match(n))&&(t.exposure=parseFloat(o[1])),(o=l.match(i))&&(t.valid|=2,t.format=o[1]),(o=l.match(s))&&(t.valid|=4,t.height=parseInt(o[1],10),t.width=parseInt(o[2],10)),t.valid&2&&t.valid&4)break}return t.valid&2||c(3,"missing format specifier"),t.valid&4||c(3,"missing image size specifier"),t},Me=function(e,a,r){const n=a;if(n<8||n>32767||e[0]!==2||e[1]!==2||e[2]&128)return new Uint8Array(e);n!==(e[2]<<8|e[3])&&c(3,"wrong scanline width");const i=new Uint8Array(4*a*r);i.length||c(4,"unable to allocate buffer space");let s=0,t=0;const l=4*n,o=new Uint8Array(4),x=new Uint8Array(l);let Z=r;for(;Z>0&&t<e.byteLength;){t+4>e.byteLength&&c(1),o[0]=e[t++],o[1]=e[t++],o[2]=e[t++],o[3]=e[t++],(o[0]!=2||o[1]!=2||(o[2]<<8|o[3])!=n)&&c(3,"bad rgbe scanline format");let S=0,g;for(;S<l&&t<e.byteLength;){g=e[t++];const w=g>128;if(w&&(g-=128),(g===0||S+g>l)&&c(3,"bad scanline data"),w){const _=e[t++];for(let ee=0;ee<g;ee++)x[S++]=_}else x.set(e.subarray(t,t+g),S),S+=g,t+=g}const Re=n;for(let w=0;w<Re;w++){let _=0;i[s]=x[w+_],_+=n,i[s+1]=x[w+_],_+=n,i[s+2]=x[w+_],_+=n,i[s+3]=x[w+_],s+=4}Z--}return i},Ee=function(e,a,r,n){const i=e[a+3],s=Math.pow(2,i-128)/255;r[n+0]=e[a+0]*s,r[n+1]=e[a+1]*s,r[n+2]=e[a+2]*s,r[n+3]=1},ue=function(e,a,r,n){const i=e[a+3],s=Math.pow(2,i-128)/255;r[n+0]=k.toHalfFloat(Math.min(e[a+0]*s,65504)),r[n+1]=k.toHalfFloat(Math.min(e[a+1]*s,65504)),r[n+2]=k.toHalfFloat(Math.min(e[a+2]*s,65504)),r[n+3]=k.toHalfFloat(1)},F=new Uint8Array(p);F.pos=0;const G=_e(F),K=G.width,Q=G.height,I=Me(F.subarray(F.pos),K,Q);let j,U,y;switch(this.type){case V:y=I.length/4;const e=new Float32Array(y*4);for(let r=0;r<y;r++)Ee(I,r*4,e,r*4);j=e,U=V;break;case A:y=I.length/4;const a=new Uint16Array(y*4);for(let r=0;r<y;r++)ue(I,r*4,a,r*4);j=a,U=A;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:K,height:Q,data:j,header:G.string,gamma:G.gamma,exposure:G.exposure,type:U}}setDataType(p){return this.type=p,this}load(p,E,Y,q){function $(c,X){switch(c.type){case V:case A:c.colorSpace=xe,c.minFilter=te,c.magFilter=te,c.generateMipmaps=!1,c.flipY=!0;break}E&&E(c,X)}return super.load(p,$,Y,q)}}const L=new Oe({title:"Global Controls",width:320});new W(16711680);const ne=document.querySelector("canvas.webgl"),f=new be,qe=new Ye;qe.load("/textures/environmentMap/2k.hdr",R=>{R.mapping=Ge,f.background=R,f.environment=R});const m={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",()=>{m.width=window.innerWidth,m.height=window.innerHeight,u.aspect=m.width/m.height,u.updateProjectionMatrix(),B.setSize(m.width,m.height),B.setPixelRatio(Math.min(window.devicePixelRatio,2))});const u=new Se(45,m.width/m.height,.1,100);u.position.x=0;u.position.y=1;u.position.z=2;f.add(u);const se=new We(u,ne);se.enableDamping=!0;const B=new fe({canvas:ne});B.setSize(m.width,m.height);B.setPixelRatio(Math.min(window.devicePixelRatio,2));const M=new Be,C=M.load("/textures/door/color.jpg");M.load("/textures/door/alpha.jpg");const ie=M.load("/textures/door/ambientOcclusion.jpg"),le=M.load("/textures/door/height.jpg"),ce=M.load("/textures/door/metalness.jpg"),de=M.load("/textures/door/normal.jpg"),he=M.load("/textures/door/roughness.jpg"),pe=M.load("/textures/matcaps/8.png"),N=M.load("/textures/gradients/3.jpg");N.minFilter=ae;N.magFilter=ae;N.generateMipmaps=!1;C.colorSpace=oe;pe.colorSpace=oe;const T=new Le;T.map=C;T.color=new W(65280);T.transparent=!0;T.opacity=.5;T.side=Te;new Fe;const O=new Ie;O.matcap=pe;O.flatShading=!0;new Ae;new ke;const me=new De;me.shininess=100;me.specular=new W(1149183);const $e=new ve;$e.gradientMap=N;const h=new He;h.metalness=1;h.roughness=1;h.map=C;h.aoMap=ie;h.aoMapIntensity=1;h.displacementMap=le;h.displacementScale=.1;h.metalnessMap=ce;h.roughnessMap=he;h.normalMap=de;L.add(h,"metalness").min(0).max(1).step(1e-4);L.add(h,"roughness").min(0).max(1).step(1e-4);const d=new re;d.metalness=1;d.roughness=1;d.map=C;d.aoMap=ie;d.aoMapIntensity=1;d.displacementMap=le;d.displacementScale=.1;d.metalnessMap=ce;d.roughnessMap=he;d.normalMap=de;L.add(d,"transmission").min(0).max(1).step(1e-4);L.add(d,"ior").min(1).max(10).step(1e-4);L.add(d,"thickness").min(0).max(1).step(1e-4);d.transmission=1;d.ior=1.5;d.thickness=1.1;const b=new re;b.roughness=.2;b.metalness=0;b.transmission=1;b.ior=1.5;b.thickness=1;const D=new P(new Pe(.5,14,14),O),z=new P(new Ce(.3,.2,32,128),h),v=new P(new Ne(1,1,1,86,86),b),H=new P(new je(.5,32),d);new Ue(16777215,.5);const Xe=new Ve(16777215,30);D.position.x=-1.5;H.position.x=1.5;v.position.x=3;Xe.position.set(2,3,4);f.add(D,z,H,v);const Je=new ze,ge=()=>{const R=Je.getElapsedTime(),p=R/10,E=R*-.15;H.rotation.y=p,z.rotation.y=p,D.rotation.y=p,v.rotation.y=p,H.rotation.x=E,z.rotation.x=E,D.rotation.x=E,v.rotation.x=E,se.update(),B.render(f,u),window.requestAnimationFrame(ge)};ge();
//# sourceMappingURL=lesson8-BQE38GEp.js.map
